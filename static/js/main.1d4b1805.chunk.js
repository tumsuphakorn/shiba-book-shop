(this["webpackJsonpshiba-book-shop"]=this["webpackJsonpshiba-book-shop"]||[]).push([[0],{100:function(e,t,c){"use strict";c.r(t);var n=c(0),i=c.n(n),s=c(4),o=c.n(s),r=(c(66),c(42)),a=c.n(r),j=(c(67),c(29)),l=c(57),d=c(41),u=c.n(d),h=c(51),b=c(17),p=c(52),O=c.n(p),x=(c(87),c(88),c(89),c(2));var f=function(e){var t=e.title,c=e.id,n=e.cover,i=e.price,s=e.pickBook;return Object(x.jsxs)("div",{className:"Book",onClick:function(){s(c)},children:[Object(x.jsx)("img",{className:"Book-img",src:n,alt:t}),Object(x.jsx)("p",{className:"Book-title",children:t}),Object(x.jsxs)("p",{className:"Book-price",children:[i," Baht"]})]})};var m=function(e){var t=e.bookList,c=e.pickBook;return Object(x.jsxs)("div",{className:"BookList",children:[Object(x.jsx)("h2",{className:"BookList-header",children:"Book Catalogue"}),Object(x.jsx)("div",{className:"BookList-shelf",children:t.map((function(e){return Object(x.jsx)(f,Object(j.a)({pickBook:c},e),e.id)}))})]})},k=c(121),v=c(125),g=c(124),S=c(102),C=(c(91),Object(k.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:"#e4dacf",border:"2px solid #000",borderRadius:"5px",boxShadow:e.shadows[5],padding:"2rem"}}})));var N=function(e){var t=e.netPrice,c=e.handleClose,i=e.openModal,s=e.reset,o=C(),r=Object(n.useState)(0),a=Object(b.a)(r,2),j=a[0],l=a[1],d=Object(n.useState)(!1),u=Object(b.a)(d,2),h=u[0],p=u[1],O=j-t,f=Object(x.jsxs)("div",{className:o.paper,children:[Object(x.jsxs)("h1",{children:["Net Price: ",t.toLocaleString()]}),Object(x.jsx)("h3",{children:"Accept Cash:"}),Object(x.jsx)("input",{type:"number",value:j,onChange:function(e){l(e.target.value)}}),O>=0?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("h2",{children:["Change: ",(j-t).toLocaleString()]}),Object(x.jsx)("div",{className:"CheckoutModal-button",children:Object(x.jsx)("button",{onClick:function(){p(!0),setTimeout((function(){c(),p(!1),l(0),s()}),3e3)},children:"Confirm order"})})]}):Object(x.jsx)("h2",{style:{color:"red"},children:"Not enough cash"})]});return 0===t&&(f=Object(x.jsx)("div",{className:o.paper,children:Object(x.jsx)("h2",{children:"Please select items before checkout"})})),h&&(f=Object(x.jsx)("div",{className:o.paper,children:Object(x.jsx)("h2",{children:"Success! Thank you for shopping with us."})})),Object(x.jsx)("div",{className:"CheckoutModal",children:Object(x.jsx)(v.a,{className:o.modal,open:i,onClose:c,closeAfterTransition:!0,BackdropComponent:g.a,BackdropProps:{timeout:500},children:Object(x.jsx)(S.a,{in:i,children:f})})})},B=(c(96),c(126)),y=c(54),I=c.n(y),L=c(55),w=c.n(L),P=c(56),Q=c.n(P);c(97);var M=function(e){var t=e.book,c=e.increaseQuantity,n=e.decreaseQuantity,i=e.deleteItem;return Object(x.jsxs)("div",{className:"ShoppingCartItem",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{className:"ShoppingCartItem-name",children:t.title}),Object(x.jsxs)("div",{className:"ShoppingCartItem-status",children:[Object(x.jsx)(B.a,{color:"inherit",onClick:function(){c(t.id)},children:Object(x.jsx)(I.a,{})}),Object(x.jsx)("p",{children:t.count}),Object(x.jsx)(B.a,{color:"inherit",onClick:function(){n(t.id)},children:Object(x.jsx)(w.a,{})}),Object(x.jsxs)("p",{children:["Price: ",(t.price*t.count).toLocaleString()]})]})]}),Object(x.jsx)(B.a,{color:"inherit",onClick:function(){i(t.id)},children:Object(x.jsx)(Q.a,{fontSize:"large"})})]})};var z=function(e){var t=e.pickedBook,c=e.discountBookId,i=e.increaseQuantity,s=e.decreaseQuantity,o=e.deleteItem,r=e.reset,a={2:10,3:11,4:12,5:13,6:14,7:15},j=t.filter((function(e){return c.includes(e.id)})),l=t.reduce((function(e,t){return e+Number(t.price)*t.count}),0),d=0;j.length>1&&(d=Math.round(j.reduce((function(e,t){return e+Number(t.price)*a[j.length]/100}),0)));var u=l-d,h=Object(n.useState)(!1),p=Object(b.a)(h,2),O=p[0],f=p[1];return Object(x.jsxs)("div",{className:"ShoppingCart",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("h2",{className:"ShoppingCart-header",children:"Shopping Cart"}),t.map((function(e){return Object(x.jsx)(M,{book:e,increaseQuantity:i,decreaseQuantity:s,deleteItem:o},e.id)}))]}),Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"ShoppingCart-summary",children:[Object(x.jsxs)("div",{className:"ShoppingCart-price",children:[Object(x.jsx)("p",{children:"Sub total:"}),Object(x.jsxs)("p",{children:[l.toLocaleString()," Baht"]})]}),Object(x.jsxs)("div",{className:"ShoppingCart-price",children:[Object(x.jsx)("p",{children:"Discount:"}),Object(x.jsxs)("p",{children:[d.toLocaleString()," Baht"]})]}),Object(x.jsxs)("div",{className:"ShoppingCart-price",children:[Object(x.jsx)("h2",{children:"Net price:"}),Object(x.jsxs)("h2",{children:[u.toLocaleString()," Baht"]})]})]}),Object(x.jsx)("div",{className:"ShoppingCart-button",children:Object(x.jsx)("button",{onClick:function(){f(!0)},children:"Checkout"})}),Object(x.jsx)(N,{netPrice:u,handleClose:function(){f(!1)},openModal:O,reset:r})]})]})};var A=function(){var e="https://akita-examination.s3-ap-southeast-1.amazonaws.com/shiba-book-shop.json",t="https://cors-anywhere.herokuapp.com/",c=Object(n.useState)([]),i=Object(b.a)(c,2),s=i[0],o=i[1],r=Object(n.useState)([]),a=Object(b.a)(r,2),d=a[0],p=a[1];return Object(n.useEffect)((function(){function c(){return(c=Object(h.a)(u.a.mark((function c(){var n,i;return u.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,O.a.get("".concat(t).concat(e));case 2:n=c.sent,i=n.data,o(i.books);case 5:case"end":return c.stop()}}),c)})))).apply(this,arguments)}!function(){c.apply(this,arguments)}()}),[s]),Object(x.jsxs)("div",{className:"POS",children:[Object(x.jsx)(m,{bookList:s,pickBook:function(e){var t=[];if(d.some((function(t){return t.id===e})))t=d.map((function(t){return t.id===e&&t.count++,t}));else{var c=s.find((function(t){return t.id===e}));t=[].concat(Object(l.a)(d),[Object(j.a)(Object(j.a)({},c),{},{count:1})])}p(t)}}),Object(x.jsx)(z,{pickedBook:d,discountBookId:["9781408855652","9781408855669","9781408855676","9781408855683","9781408855690","9781408855706","9781408855713"],increaseQuantity:function(e){var t=d.map((function(t){return t.id===e&&t.count++,t}));p(t)},decreaseQuantity:function(e){var t=!1,c=d.map((function(c){return c.id===e&&(c.count--,0===c.count&&(t=!0)),c}));t&&(c=c.filter((function(t){return t.id!==e}))),p(c)},deleteItem:function(e){var t=d.filter((function(t){return t.id!==e}));p(t)},reset:function(){p([])}})]})};var T=function(){return Object(x.jsxs)("div",{className:"App",children:[Object(x.jsxs)("div",{className:"App-header",children:[Object(x.jsx)(a.a,{fontSize:"large"}),Object(x.jsx)("h1",{children:"Shiba Book Shop POS"}),Object(x.jsx)(a.a,{fontSize:"large"})]}),Object(x.jsx)(A,{})]})};o.a.render(Object(x.jsx)(i.a.StrictMode,{children:Object(x.jsx)(T,{})}),document.getElementById("root"))},66:function(e,t,c){},67:function(e,t,c){},87:function(e,t,c){},88:function(e,t,c){},89:function(e,t,c){},91:function(e,t,c){},96:function(e,t,c){},97:function(e,t,c){}},[[100,1,2]]]);
//# sourceMappingURL=main.1d4b1805.chunk.js.map